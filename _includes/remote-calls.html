{% if site.remote_calls %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
function remoteCall(method,args){
	return $.post("{{site.remote_calls}}",{"method":method,"args":JSON.stringify(args)}).then(function(data){
		if(data.success){
			return $.Deferred().resolve(data.result).promise();
		}else{
			return $.Deferred().reject(data.error).promise();
		}
	},function(code,status){
		return $.Deferred().reject(status).promise();
	})
}
$(document).ready(function() {
  var method = 'connection_test'
  remoteCall(method,{'input_message':'Jekyll says'}).done(function(response){
  		console.log('remote call succesfull');
    }).fail(function(){
      console.log('remote call error');
    }).always(function(){
      console.log('remote call test ended');
    });
})
</script>
{% endif %}
