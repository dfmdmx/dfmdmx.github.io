<!-- ---------includes--------- -->
{% include remote-calls.html %}
{% include messages.html %}
<!-- ---------includes--------- -->

<style>
.contact-form {
  margin-bottom: 20px;
}
.overdoingthings {
  font-family: 'Inconsolata', monospace;
  font-size: 16px;
}
</style>

<div class='contact-form'>
  <p id="message-text"></p>
  <form class="pure-form contact">
      <fieldset class="pure-group pure-form-stacked">
        <label for="about">Project</label>
        <select name="about" id="about" required>
          <option>Production Cloud Server</option>
          <option>Mx Industries</option>
          <option>Dfmd Industries</option>
          <option>Architecture</option>
          <option>Parametric design</option>
          <option>Software</option>
          <option>Other</option>
        </select>
      </fieldset>

      <fieldset class="pure-group">
          <input name="name" type="text" class="pure-input-1-2" placeholder="Name" >
          <input name="email" type="email" class="pure-input-1-2" placeholder="Email" >
      </fieldset>

      <fieldset class="pure-group">
          <input name="subject" type="text" class="pure-input-1-2" placeholder="Subject" >
          <textarea name="message" class="pure-input-1-2" placeholder="Message" ></textarea>
      </fieldset>
      <button type="submit" class="pure-button pure-input-1-2 pure-button-primary">Send transmission <i class="fas fa-satellite-dish"></i></button>
  </form>
  <br>
  <a class="u-email" href="mailto:{{ site.email }}"><i class="far fa-envelope"></i> {{ site.email }}</a><br>
  <small><b>Note:</b> Apart from this query nothing else will be email to you.</small>
</div>

<script src="https://www.google.com/recaptcha/api.js?render={{ site.data.callback.captchakey }}"></script>
<script>

$( ".contact" ).on('submit', function( event ) {
  event.preventDefault();

  {%- if jekyll.environment == 'production' -%}
  grecaptcha.ready(function() {
      grecaptcha.execute("{{ site.data.callback.captchakey }}", {action: 'form_contact'}).then(function(captcha) {
  {%- else -%} var captcha = 'dummy'; {%- endif -%}

     var method = 'form_contact';
     var payload = $( ".contact" ).serializeFormJSON();
     remoteCall(method,payload,false,captcha,false).done(function(response){
       $( ".contact" ).trigger('reset');
       messageInfo('Â¡Thank you! We will be in touch in no moment.');
     }).fail(function(){
       messageAlert('Something went wrong.');
     });

  {%- if jekyll.environment == 'production' -%}
      });
  });
  {%- endif -%}

});

</script>
